# Seri App Product Requirements Document (PRD)

## Overview

Seri is an application designed to assist users in planning their tasks by integrating them into their calendar. The app leverages Google authentication for seamless access and employs Gemini, an AI-driven tool, to process user input, understand task contexts, and schedule them appropriately across the week. Seri enhances the user experience by displaying animations when adding these events to the calendar, providing a visual and interactive scheduling process.

## Project Plan

### Features

- **Authentication:**

  - **Sign in with Google:** Users can log in using their Google account, enabling access to their Google Calendar.

- **Task Input:**

  - Users provide task details through a simple input interface (e.g., a text area), allowing them to describe tasks in natural language.

- **Task Processing and Scheduling:**

  - **Gemini Integration:** The app uses Gemini to:
    - Analyze user input to comprehend task context.
    - Determine optimal time allocations and schedule tasks across the week.
    - Generate event details (e.g., title, start time, end time) for calendar integration.

- **Calendar Integration:**

  - **Event Addition:** Events generated by Gemini are added to the user's Google Calendar.
  - The app ensures seamless synchronization with Google Calendar post-authentication.

- **User Interface Feedback:**
  - **Animations:** After processing, the app visually animates the addition of new events to a calendar view, enhancing user engagement.

### Functional Requirements

- **User Authentication:**

  - Must support Google OAuth for sign-in.
  - Requires permissions to read and write to the user's Google Calendar.

- **Input Processing:**

  - Accepts natural language input from users describing tasks.
  - Sends this input to Gemini for contextual analysis and scheduling suggestions.

- **Event Management:**

  - Adds Gemini-generated events to Google Calendar automatically.
  - Considers existing calendar events to avoid scheduling conflicts.

- **Visual Feedback:**
  - Displays a calendar view showing existing and new events.
  - Animates the addition of new events for a dynamic user experience.

## Hypothetical Technical Implementation

### Technology Stack

- **Frontend Framework:** Next.js 15
- **UI Library:** React 19 (aligned with Next.js)
- **Styling:** TailwindCSS 4
- **Authentication:** Better-Auth (better-auth.com)
- **Calendar Visualization:** FullCalendar or a custom React component
- **Animations:** CSS transitions or Framer Motion
- **API Interactions:** Next.js API Routes
- **AI Processing:** Gemini API
- **Calendar Integration:** Google Calendar API

### Dependencies

- **Dependencies:**

  - `react: ^19.0.0`
  - `react-dom: ^19.0.0`
  - `next: 15.2.3`

- **Dev Dependencies:**
  - `typescript: ^5`
  - `@types/node: ^20`
  - `@types/react: ^19`
  - `@types/react-dom: ^19`
  - `@tailwindcss/postcss: ^4`
  - `tailwindcss: ^4`
  - `eslint: ^9`
  - `eslint-config-next: 15.2.3`
  - `@eslint/eslintrc: ^3`

### Architecture

#### Frontend

- **Pages:**

  - **`/` (Main Page):**
    - Displays a task input area and a calendar view.
    - Conditionally renders a sign-in button if the user is not authenticated.
  - **Authentication Handling:** Managed by Auth.js, potentially redirecting to a sign-in page if needed.

- **Components:**

  - **SignInButton:** Initiates Google OAuth flow.
  - **TaskInput:** A text area and submit button for task entry.
  - **CalendarView:** Renders events using FullCalendar or a custom grid, with animations for new events.
  - **LoadingIndicator:** Shows processing status during task scheduling.

- **State Management:**

  - Uses React hooks (`useState`, `useEffect`) to manage events and UI states.
  - Fetches initial calendar events on page load for authenticated users.

- **Styling:**
  - Utilizes TailwindCSS 4 for responsive, utility-first design.
  - Applies classes for layout (e.g., flexbox, grid) and animations.

#### Backend (API Routes)

- **`/api/auth/`:**

  - Configures Better-Auth (better-auth.com) with Google provider.
  - Includes Google Calendar API scopes (e.g., `https://www.googleapis.com/auth/calendar.events`).

  ```js
  import { betterAuth } from "better-auth"
  export const auth = betterAuth({
    socialProviders: {
        google: {
            clientId: process.env.GOOGLE_CLIENT_ID as string,
            clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,
        },
    },
  })
  ```

- **`/api/process-tasks`:**

  - **Input:** Receives task text from the frontend.
  - **Process:**
    1. Retrieves the user's access token via Better-Auth session.
    2. Fetches existing Google Calendar events for the upcoming week.
    3. Sends task input and existing events to Gemini API.
    4. Receives suggested events from Gemini.
    5. Adds each event to Google Calendar using the API.
    6. Returns the list of created events to the frontend.
  - **Output:** JSON array of new events with details (e.g., `summary`, `start`, `end`).

- **`/api/get-events`:**
  - Fetches the user's existing Google Calendar events for display on page load.

#### Data Flow

1. **Initialization:**

   - User accesses `/`.
   - If not signed in, displays `SignInButton`.
   - If signed in, fetches events via `/api/get-events` and renders `CalendarView`.

2. **Task Submission:**

   - User enters tasks in `TaskInput` and submits.
   - Frontend sends POST request to `/api/process-tasks` with task text.

3. **Processing and Scheduling:**

   - API route:
     - Queries Google Calendar for existing events.
     - Calls Gemini API with tasks and availability.
     - Receives suggested events (e.g., `[{ "title": "Task 1", "start": "2023-10-25T09:00:00Z", "end": "2023-10-25T10:00:00Z" }, ...]`).
     - Creates events in Google Calendar.
     - Returns new events to frontend.

4. **UI Update:**
   - Frontend updates `CalendarView` state with new events.
   - Animates event addition (e.g., fade-in effect using CSS or Framer Motion).

### Key Integrations

- **Gemini API:**

  - **Purpose:** Processes natural language input and suggests task schedules.
  - **Assumption:** Provides an endpoint (e.g., `/suggest-schedule`) accepting tasks and existing events, returning structured event data.
  - **Security:** API key stored in environment variables (e.g., `.env.local`).

- **Google Calendar API:**
  - **Purpose:** Manages event fetching and creation.
  - **Authentication:** Uses OAuth access token from Better-Auth.
  - **Event Format:** Conforms to API standards (e.g., `{ "summary": "Task", "start": { "dateTime": "2023-10-25T09:00:00Z" }, "end": { "dateTime": "2023-10-25T10:00:00Z" } }`).

### Animations

- **Implementation:**

  - New events added to `CalendarView` receive a temporary CSS class (e.g., `new-event`) triggering a transition (e.g., `opacity: 0` to `opacity: 1` over 500ms).
  - Alternatively, Framer Motion animates event components with `initial` and `animate` props.

- **Behavior:**
  - Events appear dynamically after successful addition to Google Calendar, enhancing visual feedback.

### Error Handling

- **Gemini Failure:** Returns an error message (e.g., "Unable to process tasks") if the API call fails.
- **Calendar Failure:** Notifies user if events cannot be added (e.g., "Failed to update calendar").
- **Loading States:** Displays `LoadingIndicator` during API calls.

```

```
